<div class="admin-dashboard">
  <h2>Panou Administrator</h2>
  
  <div class="dashboard-nav">
    <button class="nav-tab" (click)="changeSection('posts')" [class.active]="currentSection === 'posts'">Postări</button>
    <button class="nav-tab" (click)="changeSection('events')" [class.active]="currentSection === 'events'">Evenimente</button>
    <button class="nav-tab" (click)="changeSection('admins')" [class.active]="currentSection === 'admins'">Administratori</button>
  </div>

  <div *ngIf="currentSection === 'posts'">
    <div class="dashboard-section">
      <h3>Adaugă postare nouă</h3>
      <div class="post-creation">
        <textarea [(ngModel)]="description" placeholder="Scrie o postare..."></textarea>
        
        <div class="image-input">
          <input [(ngModel)]="imageUrl" placeholder="URL Imagine">
          <button (click)="addImage()">Adaugă Imagine</button>
        </div>

        <div *ngIf="images.length > 0">
          <h4>Imagini selectate:</h4>
          <div class="image-container">
            <img *ngFor="let image of images" [src]="image.url" alt="Preview" />
          </div>
        </div>

        <button (click)="createPost()" class="action-button">Adaugă Postare</button>
      </div>
    </div>

    <div class="dashboard-section">
      <h3>Postări existente</h3>
      <div *ngFor="let post of posts" class="post-item">
        <app-postare [post]="post"></app-postare>
        <button (click)="deletePost(post.id)" class="delete-button">Șterge</button>
      </div>
    </div>
  </div>

  <div *ngIf="currentSection === 'events'">
    <div class="dashboard-section">
      <h3>Evenimente</h3>
      <div class="events-list">
        <table class="admin-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Nume eveniment</th>
              <th>Data început</th>
              <th>Data sfârșit</th>
              <th>Locație</th>
              <th>Descriere</th>
              <th>Imagini</th>
              <th>Acțiuni</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let event of events">
              <td>{{ event.id }}</td>
              <td>{{ event.name }}</td>
              <td>{{ event.startDate | date:'dd.MM.yyyy' }}</td>
              <td>{{ event.endDate | date:'dd.MM.yyyy' }}</td>
              <td>{{ event.location }}</td>
              <td class="description-cell">
                <div class="truncated-text" [title]="event.description">
                  {{ event.description ? (event.description | slice:0:50) + (event.description.length > 50 ? '...' : '') : 'Fără descriere' }}
                </div>
              </td>
              <td>{{ event.images?.length || 0 }}</td>
              <td class="actions-cell">
                <button class="edit-btn" (click)="editEvent(event)" title="Editează eveniment">
                  <span class="edit-icon">✏️</span>
                </button>
                <button class="delete-btn" (click)="deleteEvent(event.id)" title="Șterge eveniment">
                  <span class="delete-icon">🗑️</span>
                </button>
              </td>
            </tr>
            <tr *ngIf="events.length === 0">
              <td colspan="8" class="no-data">Nu există evenimente înregistrate</td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <div class="admin-actions">
        <button routerLink="/evenimente" class="action-button">Adaugă eveniment nou</button>
      </div>
    </div>
  </div>

  <div *ngIf="currentSection === 'admins'">
    <div class="dashboard-section">
      <h3>Administratori înregistrați</h3>
      <div class="admin-list">
        <table class="admin-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Nume complet</th>
              <th>Utilizator</th>
              <th>Email</th>
              <th>Acțiuni</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let admin of admins">
              <td>{{ admin.id }}</td>
              <td>{{ admin.firstName }} {{ admin.lastName }}</td>
              <td>{{ admin.username }}</td>
              <td>{{ admin.email }}</td>
              <td>
                <button class="delete-btn" (click)="deleteAdmin(admin.id)" title="Șterge administrator">
                  <span class="delete-icon">🗑️</span>
                </button>
              </td>
            </tr>
            <tr *ngIf="admins.length === 0">
              <td colspan="5" class="no-data">Nu există administratori înregistrați</td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <div class="admin-actions">
        <button routerLink="/creeare-cont" class="action-button">Adaugă administrator nou</button>
      </div>
    </div>
  </div>

  <div class="dashboard-actions">
    <button routerLink="" class="nav-button">Mergi la pagina Acasă</button>
    <button (click)="logout()" class="logout-button">Logout</button>
  </div>
</div>
