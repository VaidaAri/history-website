<div class="publicatii-container">
  <div class="language-selector">
    <div class="flag flag-ro" [class.active]="translationService.getLanguage() === 'ro'" (click)="translationService.setLanguage('ro')" title="Română"></div>
    <div class="flag flag-en" [class.active]="translationService.getLanguage() === 'en'" (click)="translationService.setLanguage('en')" title="English"></div>
    <div class="flag flag-de" [class.active]="translationService.getLanguage() === 'de'" (click)="translationService.setLanguage('de')" title="Deutsch"></div>
  </div>
  
  <div class="header-nav">
    <button class="back-button" routerLink="/istoric">← {{ 'publicationsBackToHistory' | translate }}</button>
  </div>
  <h2>{{ 'publicationsTitle' | translate }}</h2>
  
  <div class="category-selector">
    <button [class.active]="selectedCategory === 'arhivaSomesana'" (click)="switchCategory('arhivaSomesana')">{{ 'publicationsArhivaSomesana' | translate }}</button>
    <button [class.active]="selectedCategory === 'scanCoperti'" (click)="switchCategory('scanCoperti')">{{ 'publicationsReviste' | translate }}</button>
  </div>
  
  
  <div class="publications-grid" *ngIf="selectedCategory === 'arhivaSomesana'">
    <div class="publication-item" *ngFor="let image of arhivaSomesanaImages" (click)="openGallery(image)">
      <div class="publication-image-container">
        <img [src]="image.url" [alt]="image.filename" class="publication-image" loading="lazy" />
      </div>
      <div class="publication-info">
        <p>{{ image.index >= 0 ? (('publicationsPage' | translate) + ' ' + (image.index + 1)) : ('publicationsCover' | translate) }}</p>
      </div>
    </div>
  </div>
  
  <div class="publications-grid" *ngIf="selectedCategory === 'scanCoperti'">
    <div class="publication-item" *ngFor="let image of scanCopertiImages" (click)="openGallery(image)">
      <div class="publication-image-container">
        <img [src]="image.url" [alt]="image.filename" class="publication-image" loading="lazy" />
      </div>
      <div class="publication-info">
        <p>{{ ('publicationsMagazine' | translate) + ' ' + (image.index + 1) }}</p>
      </div>
    </div>
  </div>
  
  <div class="gallery-modal" *ngIf="showGallery">
    <div class="gallery-overlay" (click)="closeGallery()"></div>
    
    <div class="gallery-content">
      <button class="gallery-close" (click)="closeGallery()">×</button>
      
      <div class="gallery-title">
        <h3>{{ getCurrentImageTitle() }}</h3>
      </div>
      
      <div class="gallery-image-container" 
           (mousedown)="startDrag($event)" 
           (mousemove)="onDrag($event)" 
           (mouseup)="stopDrag()" 
           (mouseleave)="stopDrag()">
        <img *ngIf="currentImage" 
             [src]="currentImage.url" 
             [alt]="currentImage.filename" 
             class="gallery-image" 
             [ngStyle]="getImageStyle()" 
             draggable="false" />
      </div>
      
      <div class="gallery-controls">
        <div class="controls-left">
          <button class="gallery-nav prev" (click)="prevImage()">❮</button>
        </div>
        
        <div class="controls-center">
          <span class="gallery-counter">{{ currentImageIndex + 1 }} / {{ currentImages.length }}</span>
          
          <div class="zoom-controls">
            <button class="zoom-button" (click)="zoomOut()" [title]="'publicationsZoomOut' | translate">−</button>
            <span class="zoom-level">{{ (zoomLevel * 100).toFixed(0) }}%</span>
            <button class="zoom-button" (click)="zoomIn()" [title]="'publicationsZoomIn' | translate">+</button>
            <button class="zoom-button" (click)="resetZoom()" [title]="'publicationsResetZoom' | translate">↺</button>
          </div>
        </div>
        
        <div class="controls-right">
          <button class="gallery-nav next" (click)="nextImage()">❯</button>
        </div>
      </div>
    </div>
  </div>
</div>
