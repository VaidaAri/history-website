<div class="publicatii-container">
  <div class="header-nav">
    <button class="back-button" routerLink="/istoric">← Înapoi la Istoric</button>
    <h1 class="title">Publicații</h1>
  </div>
  
  <div class="category-selector">
    <button [class.active]="selectedCategory === 'arhivaSomesana'" (click)="switchCategory('arhivaSomesana')">Arhiva Someșană</button>
    <button [class.active]="selectedCategory === 'scanCoperti'" (click)="switchCategory('scanCoperti')">Reviste</button>
  </div>
  
  <div class="publication-description" *ngIf="selectedCategory === 'arhivaSomesana'">
    <h2>Arhiva Someșană</h2>
    <p>Colecție de articole istorice și documente despre regiunea Someșană. Faceți click pe imagini pentru a le vizualiza în galerie.</p>
  </div>
  
  <div class="publication-description" *ngIf="selectedCategory === 'scanCoperti'">
    <h2>Reviste</h2>
    <p>Colecție de reviste istorice. Faceți click pe imagini pentru a le vizualiza în galerie.</p>
  </div>
  
  <div class="publications-grid" *ngIf="selectedCategory === 'arhivaSomesana'">
    <div class="publication-item" *ngFor="let image of arhivaSomesanaImages" (click)="openGallery(image)">
      <div class="publication-image-container">
        <img [src]="image.url" [alt]="image.filename" class="publication-image" />
      </div>
      <div class="publication-info">
        <p>{{ image.index >= 0 ? 'Pagina ' + (image.index + 1) : 'Coperta' }}</p>
      </div>
    </div>
  </div>
  
  <div class="publications-grid" *ngIf="selectedCategory === 'scanCoperti'">
    <div class="publication-item" *ngFor="let image of scanCopertiImages" (click)="openGallery(image)">
      <div class="publication-image-container">
        <img [src]="image.url" [alt]="image.filename" class="publication-image" />
      </div>
      <div class="publication-info">
        <p>{{ 'Revista ' + (image.index + 1) }}</p>
      </div>
    </div>
  </div>
  
  <!-- Gallery modal -->
  <div class="gallery-modal" *ngIf="showGallery">
    <div class="gallery-overlay" (click)="closeGallery()"></div>
    
    <div class="gallery-content">
      <button class="gallery-close" (click)="closeGallery()">×</button>
      
      <div class="gallery-title">
        <h3>{{ getCurrentImageTitle() }}</h3>
      </div>
      
      <div class="gallery-image-container" 
           (mousedown)="startDrag($event)" 
           (mousemove)="onDrag($event)" 
           (mouseup)="stopDrag()" 
           (mouseleave)="stopDrag()">
        <img *ngIf="currentImage" 
             [src]="currentImage.url" 
             [alt]="currentImage.filename" 
             class="gallery-image" 
             [ngStyle]="getImageStyle()" 
             draggable="false" />
      </div>
      
      <div class="gallery-controls">
        <div class="controls-left">
          <button class="gallery-nav prev" (click)="prevImage()">❮</button>
        </div>
        
        <div class="controls-center">
          <span class="gallery-counter">{{ currentImageIndex + 1 }} / {{ currentImages.length }}</span>
          
          <div class="zoom-controls">
            <button class="zoom-button" (click)="zoomOut()" title="Micșorează">−</button>
            <span class="zoom-level">{{ (zoomLevel * 100).toFixed(0) }}%</span>
            <button class="zoom-button" (click)="zoomIn()" title="Mărește">+</button>
            <button class="zoom-button" (click)="resetZoom()" title="Resetează zoom">↺</button>
          </div>
        </div>
        
        <div class="controls-right">
          <button class="gallery-nav next" (click)="nextImage()">❯</button>
        </div>
      </div>
    </div>
  </div>
</div>
