<main class="expozitii-permanente">
  <!-- Borduri decorative cu modele populare românești -->
  <div class="decorative-borders">
    <div class="decorative-border-left"></div>
    <div class="decorative-border-right"></div>
  </div>
  
  <app-meniu></app-meniu>
  <app-cadran>
    <div class="container">
      <div class="header-nav">
        <button class="back-button" routerLink="/">← Înapoi la pagina principală</button>
        <h1 class="title">Expoziții Permanente</h1>
      </div>
      
      <p class="intro-text">
        Muzeul Grăniceresc Năsăudean găzduiește trei expoziții permanente care pun în valoare istoria, 
        cultura și tradițiile regiunii. Vă invităm să descoperiți bogăția patrimoniului nostru prin intermediul 
        acestor colecții valoroase.
      </p>

      <div class="category-selector">
        <button [class.active]="selectedSection === 'istorie'" (click)="switchSection('istorie')">Expoziția de Istorie</button>
        <button [class.active]="selectedSection === 'etnografie'" (click)="switchSection('etnografie')">Expoziția de Etnografie</button>
        <button [class.active]="selectedSection === 'aerLiber'" (click)="switchSection('aerLiber')">Secția în Aer Liber</button>
      </div>

      <!-- Expoziția de Istorie -->
      <div class="section-description" *ngIf="selectedSection === 'istorie'">
        <h2>Expoziția Permanentă de Istorie</h2>
        <p><em>Inaugurată în decembrie 2011</em></p>
        <p>
          Această expoziție permanentă prezintă istoria fascinantă a Regimentului II Românesc de Graniță și impactul său 
          asupra dezvoltării zonei Năsăud. Vizitatorii pot descoperi documentele, armele, uniformele și obiectele personale 
          care ilustrează viața și activitatea grănicerilor năsăudeni. De asemenea, expoziția include o secțiune dedicată 
          personalităților marcante care au contribuit la dezvoltarea culturală și istorică a regiunii.
        </p>
        <div class="exhibitions-grid">
          <div class="exhibition-item" *ngFor="let image of getPaginatedImages()" (click)="openGallery(image)">
            <div class="exhibition-image-container">
              <img [src]="image.url" [alt]="image.filename" class="exhibition-image" loading="lazy" />
            </div>
            <!-- <div class="exhibition-info">
              <p>{{ image.description || 'Vedere din expoziția de istorie' }}</p>
            </div> -->
          </div>
        </div>
        
        <!-- Pagination Controls -->
        <div class="pagination-controls" *ngIf="totalPages > 1">
          <button class="pagination-btn" (click)="prevPage()" [disabled]="currentPage === 1">
            ❮ Anterior
          </button>
          
          <div class="page-numbers">
            <button 
              *ngFor="let pageNum of getPageNumbers()" 
              class="page-number" 
              [class.active]="pageNum === currentPage"
              (click)="goToPage(pageNum)">
              {{ pageNum }}
            </button>
          </div>
          
          <button class="pagination-btn" (click)="nextPage()" [disabled]="currentPage === totalPages">
            Următorul ❯
          </button>
        </div>
        
        <div class="pagination-info" *ngIf="totalPages > 1">
          <p>Pagina {{ currentPage }} din {{ totalPages }} ({{ getCurrentSectionImages().length }} imagini în total)</p>
        </div>
      </div>

      <!-- Expoziția de Etnografie -->
      <div class="section-description" *ngIf="selectedSection === 'etnografie'">
        <h2>Expoziția de Etnografie</h2>
        <p><em>Inaugurată în mai 2009, de "Zilele Năsăudului"</em></p>
        <p>
          Expoziția de etnografie prezintă tradițiile, costumele și obiceiurile specifice zonei Năsăud și Țării Năsăudului. 
          Colecția cuprinde costume populare autentice, obiecte de uz casnic tradițional, instrumente de lucru și piese de 
          artizanat local. Această expoziție oferă o perspectivă completă asupra vieții și culturii tradiționale din regiunea 
          grănicerească năsăudeană.
        </p>
        <div class="exhibitions-grid">
          <div class="exhibition-item" *ngFor="let image of getPaginatedImages()" (click)="openGallery(image)">
            <div class="exhibition-image-container">
              <img [src]="image.url" [alt]="image.filename" class="exhibition-image" loading="lazy" />
            </div>
            <!-- <div class="exhibition-info">
              <p>{{ image.description || 'Vedere din expoziția de etnografie' }}</p>
            </div> -->
          </div>
        </div>
        
        <!-- Pagination Controls -->
        <div class="pagination-controls" *ngIf="totalPages > 1">
          <button class="pagination-btn" (click)="prevPage()" [disabled]="currentPage === 1">
            ❮ Anterior
          </button>
          
          <div class="page-numbers">
            <button 
              *ngFor="let pageNum of getPageNumbers()" 
              class="page-number" 
              [class.active]="pageNum === currentPage"
              (click)="goToPage(pageNum)">
              {{ pageNum }}
            </button>
          </div>
          
          <button class="pagination-btn" (click)="nextPage()" [disabled]="currentPage === totalPages">
            Următorul ❯
          </button>
        </div>
        
        <div class="pagination-info" *ngIf="totalPages > 1">
          <p>Pagina {{ currentPage }} din {{ totalPages }} ({{ getCurrentSectionImages().length }} imagini în total)</p>
        </div>
      </div>

      <!-- Secția în Aer Liber -->
      <div class="section-description" *ngIf="selectedSection === 'aerLiber'">
        <h2>Secția în Aer Liber</h2>
        <p><em>Finalizată în 2010, inaugurată în decembrie 2010</em></p>
        <p>
          Situată în curtea din spate a muzeului, secția în aer liber cu specific etnografic reprezintă o atracție unică. 
          Centrul de atracție îl constituie o veche casă cu specific țărănesc, strămutată din localitatea Ilva Mare și 
          reconstruită fidel în incinta muzeului. Această casă tradițională oferă vizitatorilor posibilitatea de a experimenta 
          direct arhitectura și stilul de viață din satele năsăudene de odinioară.
        </p>
        <div class="exhibitions-grid">
          <div class="exhibition-item" *ngFor="let image of getPaginatedImages()" (click)="openGallery(image)">
            <div class="exhibition-image-container">
              <img [src]="image.url" [alt]="image.filename" class="exhibition-image" loading="lazy" />
            </div>
            <!-- <div class="exhibition-info">
              <p>{{ image.description || 'Vedere din secția în aer liber' }}</p>
            </div> -->
          </div>
        </div>
        
        <!-- Pagination Controls -->
        <div class="pagination-controls" *ngIf="totalPages > 1">
          <button class="pagination-btn" (click)="prevPage()" [disabled]="currentPage === 1">
            ❮ Anterior
          </button>
          
          <div class="page-numbers">
            <button 
              *ngFor="let pageNum of getPageNumbers()" 
              class="page-number" 
              [class.active]="pageNum === currentPage"
              (click)="goToPage(pageNum)">
              {{ pageNum }}
            </button>
          </div>
          
          <button class="pagination-btn" (click)="nextPage()" [disabled]="currentPage === totalPages">
            Următorul ❯
          </button>
        </div>
        
        <div class="pagination-info" *ngIf="totalPages > 1">
          <p>Pagina {{ currentPage }} din {{ totalPages }} ({{ getCurrentSectionImages().length }} imagini în total)</p>
        </div>
      </div>
      
      <div class="info-section">
        <h3>Program de vizitare</h3>
        <p>Expozițiile permanente pot fi vizitate în timpul programului normal al muzeului:</p>
        <ul>
          <li><strong>Marți - Vineri:</strong> 9:00 - 17:00</li>
          <li><strong>Sâmbătă - Duminică:</strong> 10:00 - 16:00</li>
          <li><strong>Luni:</strong> Închis</li>
        </ul>
        <p>Pentru grupuri organizate, vă rugăm să faceți o rezervare în prealabil.</p>
      </div>

      <!-- Gallery modal -->
      <div class="gallery-modal" *ngIf="showGallery" [class.fullscreen]="isFullscreen">
        <div class="gallery-overlay" (click)="closeGallery()"></div>
        
        <div class="gallery-content" [class.fullscreen-content]="isFullscreen">
          <button class="gallery-close" (click)="closeGallery()">×</button>
          
          <div class="gallery-title">
            <h3>{{ getCurrentImageTitle() }}</h3>
          </div>
          
          <div class="gallery-image-container" 
               (mousedown)="startDrag($event)" 
               (mousemove)="onDrag($event)" 
               (mouseup)="stopDrag()" 
               (mouseleave)="stopDrag()">
            <img *ngIf="currentImage" 
                 [src]="currentImage.url" 
                 [alt]="currentImage.filename" 
                 class="gallery-image" 
                 [ngStyle]="getImageStyle()" 
                 draggable="false" />
          </div>
          
          <div class="gallery-controls">
            <div class="controls-left">
              <button class="gallery-nav prev" (click)="prevImage()" title="Imaginea anterioară (←)">❮</button>
            </div>
            
            <div class="controls-center">
              <span class="gallery-counter">{{ currentImageIndex + 1 }} / {{ currentImages.length }}</span>
              
              <div class="action-controls">
                <div class="zoom-controls">
                  <button class="control-button" (click)="zoomOut()" title="Micșorează (-)">−</button>
                  <span class="zoom-level">{{ (zoomLevel * 100).toFixed(0) }}%</span>
                  <button class="control-button" (click)="zoomIn()" title="Mărește (+)">+</button>
                  <button class="control-button" (click)="resetZoom()" title="Resetează zoom (0)">↺</button>
                </div>
                
                <div class="transform-controls">
                  <button class="control-button" (click)="resetImageTransforms()" title="Resetează transformările">
                    🔄
                  </button>
                  <button class="control-button fullscreen-btn" (click)="toggleFullscreen()" [title]="isFullscreen ? 'Ieși din fullscreen (F)' : 'Fullscreen (F)'">
                    <span *ngIf="!isFullscreen">⛶</span>
                    <span *ngIf="isFullscreen">⧉</span>
                  </button>
                </div>
              </div>
            </div>
            
            <div class="controls-right">
              <button class="gallery-nav next" (click)="nextImage()" title="Imaginea următoare (→)">❯</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </app-cadran>
</main>