<main class="prietenii-muzeului">
  <!-- Borduri decorative cu modele populare romÃ¢neÈ™ti -->
  <div class="decorative-borders">
    <div class="decorative-border-left"></div>
    <div class="decorative-border-right"></div>
  </div>
  
  <app-meniu></app-meniu>
  <app-cadran>
    <div class="container">
      <div class="header-nav">
        <button class="back-button" routerLink="/">â† Ãnapoi la pagina principalÄƒ</button>
        <h1 class="title">Prietenii Muzeului</h1>
      </div>
      
      <p class="intro-text">
        Muzeul GrÄƒniceresc NÄƒsÄƒudean este un loc plin de viaÈ›Äƒ, unde istoria prinde culoare prin zÃ¢mbetele copiilor din È™colile care ne viziteazÄƒ cu entuziasm! 
        Prietenii noÈ™tri sunt clasele pline de elevi curioÈ™i care descoperÄƒ cu ochii mari exponatele, voluntarii care ne ajutÄƒ la tÃ¢rgurile de CrÄƒciun È™i evenimentele speciale, 
        familiile care petrec weekenduri frumoase explorÃ¢nd trecutul, È™i toÈ›i cei care Ã®È™i deschid inimile pentru patrimoniul cultural al NÄƒsÄƒudului. 
        Fiecare vizitator, fiecare mÃ¢nÄƒ de ajutor, fiecare poveste Ã®mpÄƒrtÄƒÈ™itÄƒ face din muzeul nostru un spaÈ›iu al comunitÄƒÈ›ii!
      </p>

      <!-- SecÈ›iunea de administrare (vizibilÄƒ doar pentru administratori) -->
      <div *ngIf="isAdmin" class="admin-section">
        <div class="admin-header">
          <h3>Administrare imagini</h3>
        </div>
        
        <div class="upload-form">
          <div class="upload-status" *ngIf="showUploadMessage" [class.success]="uploadMessage.includes('succes')" [class.error]="!uploadMessage.includes('succes')">
            {{ uploadMessage }}
          </div>
          
          <div class="form-group">
            <label for="image-description">Descriere imagine:</label>
            <input 
              type="text" 
              id="image-description" 
              [(ngModel)]="imageDescription" 
              placeholder="AdaugÄƒ o descriere pentru imagine..."
              class="description-input"
            >
          </div>
          
          <div class="form-group">
            <label for="image-upload" class="file-upload-label">
              <span class="upload-icon">ğŸ“·</span>
              <span>SelecteazÄƒ imagini</span>
            </label>
            <input 
              type="file" 
              id="image-upload" 
              (change)="onFileSelected($event)" 
              accept="image/*" 
              multiple
              class="file-input"
            >
            <div *ngIf="selectedFiles.length > 0" class="selected-files-info">
              <div class="selected-files-header">
                FiÈ™iere selectate ({{ selectedFiles.length }}):
              </div>
              <div class="selected-files-list">
                <div *ngFor="let file of selectedFiles; let i = index" class="selected-file-item">
                  <span class="file-name">{{ file.name }}</span>
                  <button type="button" class="remove-file-btn" (click)="removeFile(i)" title="EliminÄƒ fiÈ™ierul">
                    Ã—
                  </button>
                </div>
              </div>
            </div>
          </div>
          
          <button 
            (click)="uploadImages()" 
            [disabled]="isUploading || selectedFiles.length === 0" 
            class="upload-btn"
          >
            <span *ngIf="!isUploading">ÃncarcÄƒ imaginile ({{ selectedFiles.length }})</span>
            <span *ngIf="isUploading">Se Ã®ncarcÄƒ {{ currentUploadIndex + 1 }}/{{ selectedFiles.length }}...</span>
          </button>
        </div>
      </div>

      <!-- Mesaj cÃ¢nd nu existÄƒ imagini -->
      <div *ngIf="prieteniImages.length === 0" class="no-images">
        <p>Nu existÄƒ imagini disponibile momentan.</p>
      </div>

      <!-- Grid de imagini similar cu expozitii-permanente -->
      <div *ngIf="prieteniImages.length > 0" class="prieteni-gallery">
        <div class="images-grid">
          <div class="image-item" *ngFor="let image of getPaginatedImages()" (click)="openGallery(image)">
            <div class="image-container">
              <img [src]="getImageUrl(image.path)" [alt]="image.description" class="gallery-image" loading="lazy" />
              
              <!-- Overlay cu informaÈ›ii administrative pentru admin -->
              <div *ngIf="isAdmin" class="admin-overlay">
                <button 
                  (click)="deleteImage(image.id); $event.stopPropagation()" 
                  class="admin-delete-btn" 
                  title="È˜terge imaginea"
                >
                  <span class="delete-icon">ğŸ—‘ï¸</span>
                </button>
              </div>
            </div>
            <!-- <div class="image-info">
              <p>{{ image.description }}</p>
            </div> -->
          </div>
        </div>
        
        <!-- Controale de paginare -->
        <div class="pagination-controls" *ngIf="totalPages > 1">
          <button class="pagination-btn" (click)="prevPage()" [disabled]="currentPage === 1">
            â® Anterior
          </button>
          
          <div class="page-numbers">
            <button 
              *ngFor="let pageNum of getPageNumbers()" 
              class="page-number" 
              [class.active]="pageNum === currentPage"
              (click)="goToPage(pageNum)">
              {{ pageNum }}
            </button>
          </div>
          
          <button class="pagination-btn" (click)="nextPage()" [disabled]="currentPage === totalPages">
            UrmÄƒtorul â¯
          </button>
        </div>
        
        <div class="pagination-info" *ngIf="totalPages > 1">
          <p>Pagina {{ currentPage }} din {{ totalPages }}</p>
        </div>
      </div>

      
      <div class="contact-section">
        <h3>Contact pentru informaÈ›ii</h3>
        <p>Pentru mai multe informaÈ›ii despre programul "Prietenii Muzeului" sau despre cum puteÈ›i contribui, vÄƒ rugÄƒm sÄƒ ne contactaÈ›i:</p>
        <div class="contact-details">
          <p><strong>Email:</strong> prieteni&#64;muzeunasaud.ro</p>
          <p><strong>Telefon:</strong> 0263 361853</p>
        </div>
      </div>
      
    </div>

    <!-- Galeria modal -->
    <div class="gallery-modal" *ngIf="showGallery" [class.fullscreen]="isFullscreen">
      <div class="gallery-overlay" (click)="closeGallery()"></div>
      
      <div class="gallery-content" [class.fullscreen-content]="isFullscreen">
        <button class="gallery-close" (click)="closeGallery()">Ã—</button>
        
        <div class="gallery-title">
          <h3>Prietenii Muzeului</h3>
        </div>
        
        <div class="gallery-image-container" 
             (mousedown)="startDrag($event)" 
             (mousemove)="onDrag($event)" 
             (mouseup)="stopDrag()" 
             (mouseleave)="stopDrag()">
          <img *ngIf="currentImage" 
               [src]="getImageUrl(currentImage.path)" 
               [alt]="currentImage.description" 
               class="gallery-image" 
               [ngStyle]="getImageStyle()" 
               draggable="false" />
        </div>
        
        <div class="gallery-controls">
          <div class="controls-left">
            <button class="gallery-nav prev" (click)="prevModalImage()" title="Imaginea anterioarÄƒ (â†)">â®</button>
          </div>
          
          <div class="controls-center">
            <span class="gallery-counter">{{ currentModalImageIndex + 1 }} / {{ prieteniImages.length }}</span>
            
            <div class="action-controls">
              <div class="zoom-controls">
                <button class="control-button" (click)="zoomOut()" title="MicÈ™oreazÄƒ (-)">âˆ’</button>
                <span class="zoom-level">{{ (zoomLevel * 100).toFixed(0) }}%</span>
                <button class="control-button" (click)="zoomIn()" title="MÄƒreÈ™te (+)">+</button>
                <button class="control-button" (click)="resetZoom()" title="ReseteazÄƒ zoom (0)">â†º</button>
              </div>
              
              <div class="transform-controls">
                <button class="control-button" (click)="resetImageTransforms()" title="ReseteazÄƒ transformÄƒrile">
                  ğŸ”„
                </button>
                <button class="control-button fullscreen-btn" (click)="toggleFullscreen()" [title]="isFullscreen ? 'IeÈ™i din fullscreen (F)' : 'Fullscreen (F)'">
                  <span *ngIf="!isFullscreen">â›¶</span>
                  <span *ngIf="isFullscreen">â§‰</span>
                </button>
              </div>
            </div>
            
            <!-- InformaÈ›ii administrative pentru admin -->
            <div *ngIf="isAdmin && currentImage" class="admin-modal-info">
              <div class="admin-detail">ID: {{ currentImage.id }}</div>
              <div class="admin-detail">{{ currentImage.description }}</div>
            </div>
          </div>
          
          <div class="controls-right">
            <button class="gallery-nav next" (click)="nextModalImage()" title="Imaginea urmÄƒtoare (â†’)">â¯</button>
          </div>
        </div>
      </div>
    </div>
  </app-cadran>
</main>